<div class="min-h-screen bg-gray-50 flex items-center justify-center p-6">
  
  <div class="bg-white rounded-xl shadow-lg w-full max-w-2xl overflow-hidden">
    
    <div class="bg-gray-800 p-6 text-white flex justify-between items-center">
      <div>
        <h2 class="text-2xl font-bold">
          {{ isEditMode ? 'Editar Producto' : 'Registrar Nuevo Producto' }}
        </h2>
        <p class="text-gray-400 text-sm mt-1">
          Información básica del inventario.
        </p>
      </div>
      <div class="bg-gray-700 p-3 rounded-lg">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
        </svg>
      </div>
    </div>

    <form (ngSubmit)="onSubmit(productForm)" #productForm="ngForm" novalidate class="p-8">
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">SKU (Código) <span class="text-red-500">*</span></label>
          <input type="text" 
                 [(ngModel)]="product.SKU" 
                 name="sku"
                 required
                 [disabled]="isEditMode"
                 [ngClass]="{'bg-gray-100 cursor-not-allowed text-gray-500': isEditMode}"
                 placeholder="Ej: TEM-500-TAB"
                 class="w-full border border-gray-300 rounded-lg p-2.5 focus:ring-2 focus:ring-blue-500 outline-none uppercase font-mono text-sm">
          <p *ngIf="isEditMode" class="text-xs text-gray-400 mt-1">El SKU no se puede modificar.</p>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">
            Categoría <span class="text-red-500">*</span>
          </label>
          
          <select [(ngModel)]="product.category" 
                  [compareWith]="compareFn"
                  name="category"
                  required
                  class="w-full border border-gray-300 rounded-lg p-2.5 focus:ring-2 focus:ring-blue-500 bg-white">
            <option value="" disabled>-- Seleccione --</option>
            <option *ngFor="let cat of categories" [ngValue]="cat">{{ cat }}</option>
          </select>
        </div>

        <div class="col-span-1 md:col-span-2">
          <label class="block text-sm font-medium text-gray-700 mb-1">Nombre Comercial <span class="text-red-500">*</span></label>
          <input type="text" 
                 [(ngModel)]="product.comercial_name" 
                 name="comercial_name"
                 required
                 placeholder="Ej: Tempra Forte"
                 class="w-full border border-gray-300 rounded-lg p-2.5 focus:ring-2 focus:ring-blue-500">
        </div>

        <div class="col-span-1 md:col-span-2">
          <label class="block text-sm font-medium text-gray-700 mb-1">Ingrediente Activo <span class="text-red-500">*</span></label>
          <input type="text" 
                 [(ngModel)]="product.active_ingredient" 
                 name="active_ingredient"
                 required
                 placeholder="Ej: Paracetamol"
                 class="w-full border border-gray-300 rounded-lg p-2.5 focus:ring-2 focus:ring-blue-500">
        </div>

        <div class="col-span-1 md:col-span-2">
          <label class="block text-sm font-medium text-gray-700 mb-1">Descripción <span class="text-red-500">*</span></label>
          <textarea [(ngModel)]="product.description" 
                    name="description"
                    required
                    rows="2"
                    placeholder="Ej: Caja con 24 tabletas..."
                    class="w-full border border-gray-300 rounded-lg p-2.5 focus:ring-2 focus:ring-blue-500"></textarea>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Precio ($) <span class="text-red-500">*</span></label>
          <div class="relative">
            <span class="absolute inset-y-0 left-0 pl-3 flex items-center text-gray-500">$</span>
            <input type="number" 
                   [(ngModel)]="product.price" 
                   name="price"
                   required
                   min="0"
                   step="0.50"
                   class="w-full border border-gray-300 rounded-lg p-2.5 pl-7 focus:ring-2 focus:ring-blue-500">
          </div>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Stock <span class="text-red-500">*</span></label>
          <input type="number" 
                 [(ngModel)]="product.stock" 
                 name="stock"
                 required
                 min="0"
                 class="w-full border border-gray-300 rounded-lg p-2.5 focus:ring-2 focus:ring-blue-500">
        </div>

      </div>

      <div class="mt-8 flex gap-4 justify-end border-t border-gray-100 pt-6">
        
        <button type="button" 
                routerLink="/productsv2/list"
                class="px-6 py-2.5 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50 font-medium transition-colors">
          Cancelar
        </button>
        
        <button type="submit" 
                [disabled]="isLoading"
                class="px-6 py-2.5 rounded-lg bg-blue-600 hover:bg-blue-700 text-white font-medium shadow-md transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed">
          
          <span *ngIf="isLoading" class="animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"></span>
          
          {{ isEditMode ? 'Guardar Cambios' : 'Registrar' }}
        </button>
      </div>

    </form>
  </div>
</div>